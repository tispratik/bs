:javascript
  $(document).ready(function() {
    $('.tags #article_tag_list').autocomplete("#{suggest_project_articles_path(@project)}", {
      extraParams: {field: "tags"},
      multiple: true,
      multipleSeparator: ", "
    })
    
    $('form.edit_article').submitWithAjax();
  })

- content_for :sidebar do
  = render :partial => "new", :locals => {:article => @project.articles.build}

%h2.left
  =h @article
%span
  - if @article.created_by == current_user.id
    = link_to image_tag('delete.png', :title => "Delete article"), [@project, @article], :method => :delete
.clear

%p
  Ref: #{process_html_links @article.citation_author}, #{process_html_links @article.citation_source} (#{@article.citation_date})
%br

.content
  = markdown @article.content
%br

.tags
  - if @article.created_by == current_user.id
    - form_for [@project, @article] do |f|
      = f.text_field :tag_list
      = f.submit "Update Tags"
  - else
    %strong
      Tags:
    = @article.tag_list
%br

- unless @article.assets.empty?
  %h2 Attachments
  #attachments
    = render :partial => 'attachment', :collection => @article.assets

%h2
  Comments
#comments
  = render @article.comments

- if logged_in?
  #new_comment_form
    %h2 Add new Comment
    = render :partial => "comments/form", :locals => {:comment => @article.comments.new}

